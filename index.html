<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="icon" type="image/png" href="favicon.png" />
    <title>mod_perl vs. PSGI benchmark</title>
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.1.0.min.js"
            integrity="sha256-cCueBR6CsyA4/9szpPfrX3s49M9vUU5BgtiJj06wt/s=" crossorigin="anonymous"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
        google.charts.load('current', {'packages':['corechart']});
        google.charts.setOnLoadCallback(drawChart);

        function drawChart() {
            var titles = ['Concurrency', 'Apache / mod_perl', 'Nginx / uWSGI / PSGI'],
                dataRps = google.visualization.arrayToDataTable([
                        titles,
                        [1,  313.79,  500.66],  [1,  307.88, 500.21],   [1,  304.11,  497.20],
                        [2,  1063.43, 1062.85], [2,  1058.22, 1090.27], [2,  1049.42, 1091.04],
                        [3,  1399.87, 1248.63], [3,  1299.82, 1310.69], [3,  1359.53, 1295.45],
                        [4,  1420.76, 1393.32], [4,  1423.17, 1464.17], [4,  1381.47, 1430.92],
                        [5,  1408.14, 1505.91], [5,  1357.64, 1513.04], [5,  1366.72, 1554.33],
                        [6,  1417.92, 1563.46], [6,  1371.45, 1544.30], [6,  1336.41, 1580.03],
                        [7,  1421.95, 1542.04], [7,  1428.33, 1523.61], [7,  1407.13, 1581.04],
                        [8,  1460.82, 1558.31], [8,  1423.42, 1647.77], [8,  1413.11, 1663.85],
                        [9,  1451.82, 1635.59], [9,  1384.20, 1620.71], [9,  1427.43, 1659.79],
                        [10, 1373.19, 1603.94], [10, 1427.99, 1658.58], [10, 1429.27, 1646.12],
                        [11, 1439.16, 1629.57], [11, 1403.16, 1610.48], [11, 1419.89, 1642.82],
                        [12, 1459.80, 1592.65], [12, 1382.22, 1635.89], [12, 1430.98, 1608.51],
                        [13, 1382.16, 1645.79], [13, 1361.34, 1649.28], [13, 1422.95, 1630.58],
                        [14, 1446.20, 1643.68], [14, 1381.60, 1668.17], [14, 1398.19, 1693.07],
                        [15, 1459.37, 1636.82], [15, 1384.43, 1666.61], [15, 1418.19, 1685.11],
                        [16, 1422.06, 1646.21], [16, 1427.98, 1687.32], [16, 1422.45, 1706.75],
                        [17, 1409.32, 1620.29], [17, 1458.64, 1701.27], [17, 1402.00, 1720.37],
                        [18, 1432.16, 1637.06], [18, 1427.98, 1730.10], [18, 1416.69, 1683.53],
                        [19, 1411.71, 1717.40], [19, 1403.71, 1647.71], [19, 1415.54, 1723.98],
                        [20, 1466.90, 1696.59], [20, 1448.19, 1741.00], [20, 1420.48, 1718.98]
                ]),
                dataRps2 = google.visualization.arrayToDataTable([
                    titles,
                    [1,  976.51,  1022.69], [1,  977.08,  1025.44], [1,  964.47,  929.46],
                    [2,  2221.92, 2849.82], [2,  2228.54, 2945.82], [2,  2199.97, 2903.91],
                    [3,  3667.09, 4213.65], [3,  3811.44, 4166.14], [3,  3727.10, 4244.14],
                    [4,  4440.28, 5167.82], [4,  4391.51, 4946.78], [4,  4421.55, 5238.76],
                    [5,  4690.78, 5039.04], [5,  4695.61, 5041.09], [5,  4689.15, 4960.06],
                    [6,  4874.72, 5231.74], [6,  4888.27,  313.70], [6,  4875.04, 5166.74],
                    [7,  4852.04, 5475.46], [7,  4862.14, 5846.52], [7,  4818.23, 5416.67],
                    [8,  4735.85, 5430.06], [8,  4740.54, 5643.34], [8,  4735.36, 5550.33],
                    [9,  4698.80, 5415.81], [9,  4674.11, 5500.65], [9,  4702.78, 5417.74],
                    [10, 4741.41, 5376.00], [10, 4718.82, 5439.65], [10, 4720.14, 5354.27],
                    [11, 4741.38, 5396.69], [11, 4712.28, 5477.83], [11, 4714.70, 5456.51],
                    [12, 4744.61, 5596.00], [12, 4726.23, 5593.91], [12, 4731.07, 5470.46],
                    [13, 4747.09, 5540.63], [13, 4711.55, 5589.93], [13, 4731.76, 5453.34],
                    [14, 4723.69, 5484.09], [14, 4695.48, 5598.97], [14, 4733.20, 5427.23],
                    [15, 4743.71, 5577.80], [15, 4708.73, 5509.96], [15, 4729.55, 5417.19],
                    [16, 4750.36, 5659.40], [16, 4692.20, 5517.27], [16, 4719.15, 5442.97],
                    [17, 4745.97, 5697.64], [17, 4685.61, 5550.68], [17, 4698.26, 5595.28],
                    [18, 4747.20, 5705.44], [18, 4681.99, 5571.16], [18, 4697.24, 5580.71],
                    [19, 4739.55, 5697.12], [19, 4700.12, 5517.59], [19, 4709.51, 5584.06],
                    [20, 4737.00, 5735.81], [20, 4711.11, 5693.33], [20, 4711.47, 5573.40],
                    [21, 4733.41, 5633.51], [21, 4699.92, 5670.36], [21, 4726.61, 5614.18],
                    [22, 4754.44, 5704.06], [22, 4696.82, 5667.64], [22, 4730.31, 5625.17],
                    [23, 4761.28, 5719.20], [23, 4699.48, 5633.65], [23, 4733.52, 5665.09],
                    [24, 4770.09, 5752.59], [24, 4712.06, 5611.62], [24, 4719.87, 5641.06],
                    [25, 4767.19, 5639.77], [25, 4703.13, 5680.97], [25, 4723.28, 5693.74],
                    [26, 4772.53, 5752.76], [26, 4703.06, 5685.99], [26, 4687.83, 5687.66],
                    [27, 4768.95, 5762.03], [27, 4689.33, 5643.46], [27, 4711.65, 5700.32],
                    [28, 4766.93, 5684.49], [28, 4688.85, 5671.72], [28, 4707.76, 5724.60],
                    [29, 4768.27, 5785.13], [29, 4693.16, 5725.28], [29, 4721.52, 5632.01],
                    [30, 4774.74, 5666.51], [30, 4689.80, 5617.08], [30, 4716.54, 5751.48],
                    [31, 4773.63, 5790.24], [31, 4674.05, 5702.01], [31, 4721.88, 5658.77],
                    [32, 4773.12, 5690.02], [32, 4692.07, 5775.76], [32, 4734.81, 5731.18],
                    [33, 4765.54, 5803.99], [33, 4703.80, 5640.69], [33, 4718.78, 5657.02],
                    [34, 4777.85, 5693.60], [34, 4700.66, 5754.17], [34, 4726.39, 5776.96],
                    [35, 4768.54, 5679.49], [35, 4698.88, 5666.60], [35, 4715.77, 5711.22],
                    [36, 4765.67, 5728.99], [36, 4698.95, 5808.91], [36, 4697.75, 5685.95],
                    [37, 4756.32, 5704.60], [37, 4705.71, 5699.84], [37, 4715.75, 5806.25],
                    [38, 4761.45, 5820.00], [38, 4704.72, 5681.96], [38, 4725.31, 5688.25],
                    [39, 4758.23, 5708.23], [39, 4705.09, 5798.41], [39, 4740.18, 5682.43],
                    [40, 4750.79, 5844.22], [40, 4724.38, 5683.31], [40, 4728.49, 5806.51]
                ]),
                dataRt = google.visualization.arrayToDataTable([
                    titles,
                    [1,  3.187,  1.997],  [1,  3.248,  1.999],  [1,  3.288,  2.011],
                    [2,  1.881,  1.882],  [2,  1.890,  1.834],  [2,  1.906,  1.833],
                    [3,  2.143,  2.403],  [3,  2.308,  2.289],  [3,  2.207,  2.316],
                    [4,  2.815,  2.871],  [4,  2.811,  2.732],  [4,  2.895,  2.795],
                    [5,  3.551,  3.320],  [5,  3.683,  3.305],  [5,  3.658,  3.217],
                    [6,  4.232,  3.838],  [6,  4.375,  3.885],  [6,  4.490,  3.797],
                    [7,  4.923,  4.539],  [7,  4.901,  4.594],  [7,  4.975,  4.427],
                    [8,  5.476,  5.134],  [8,  5.620,  4.855],  [8,  5.661,  4.808],
                    [9,  6.199,  5.503],  [9,  6.502,  5.553],  [9,  6.305,  5.422],
                    [10, 7.282,  6.235],  [10, 7.003,  6.029],  [10, 6.997,  6.075],
                    [11, 7.643,  6.750],  [11, 7.839,  6.830],  [11, 7.747,  6.696],
                    [12, 8.220,  7.535],  [12, 8.682,  7.335],  [12, 8.386,  7.460],
                    [13, 9.406,  7.899],  [13, 9.549,  7.882],  [13, 9.136,  7.973],
                    [14, 9.681,  8.517],  [14, 10.133, 8.392],  [14, 10.013, 8.269],
                    [15, 10.278, 9.164],  [15, 10.835, 9.000],  [15, 10.577, 8.901],
                    [16, 11.251, 9.719],  [16, 11.205, 9.483],  [16, 11.248, 9.375],
                    [17, 12.063, 10.492], [17, 11.655, 9.993],  [17, 12.126, 9.882],
                    [18, 12.568, 10.995], [18, 12.605, 10.404], [18, 12.706, 10.692],
                    [19, 13.459, 11.063], [19, 13.536, 11.531], [19, 13.422, 11.021],
                    [20, 13.634, 11.788], [20, 13.810, 11.488], [20, 14.080, 11.635]
                ]),
                dataRAM = google.visualization.arrayToDataTable([
                    titles,
                    [1,  33.0508, 14.1445], [1,  27.5664, 14.1445], [1,  30.1602, 14.1445],
                    [2,  53.3789, 14.1445], [2,  39.8789, 14.1445], [2,  50.4961, 14.1445],
                    [3,  97.1211, 14.1445], [3,  78.0586, 14.1445], [3,  103.559, 14.1445],
                    [4,  168.598, 14.1445], [4,  174.184, 14.1445], [4,  189.945, 14.1445],
                    [5,  203.324, 14.1445], [5,  190.094, 14.1445], [5,  193.898, 14.1445],
                    [6,  217.676, 14.1445], [6,  195.086, 14.1445], [6,  195.277, 14.1445],
                    [7,  226.527, 14.1445], [7,  203.840, 14.1445], [7,  207.949, 14.1445],
                    [8,  237.098, 14.1445], [8,  209.852, 14.1445], [8,  221.246, 14.1445],
                    [9,  250.504, 14.1445], [9,  218.617, 14.1445], [9,  229.676, 14.1445],
                    [10, 248.098, 14.1445], [10, 222.660, 14.1445], [10, 237.582, 14.1445],
                    [11, 247.355, 14.1484], [11, 228.848, 14.1484], [11, 240.734, 14.1445],
                    [12, 262.051, 14.1602], [12, 232.199, 14.1641], [12, 247.023, 14.1602],
                    [13, 264.887, 14.1758], [13, 230.922, 14.1758], [13, 252.395, 14.1758],
                    [14, 266.691, 14.1875], [14, 233.840, 14.1914], [14, 263.738, 14.1875],
                    [15, 274.684, 14.1992], [15, 240.719, 14.2031], [15, 273.875, 14.1992],
                    [16, 277.777, 14.2148], [16, 252.660, 14.2188], [16, 275.078, 14.2109],
                    [17, 289.379, 14.2227], [17, 259.879, 14.2227], [17, 288.324, 14.2266],
                    [18, 303.301, 14.2422], [18, 270.965, 14.2305], [18, 298.891, 14.2383],
                    [19, 313.871, 14.2539], [19, 283.082, 14.2539], [19, 303.531, 14.2461],
                    [20, 323.066, 14.2695], [20, 295.973, 14.2422], [20, 314.715, 14.2617]
                ]),
                optionsCommon = {
                    width: 900,
                    height: 500,
                    legend: {position: 'bottom'},
                    crosshair: 'none',
                    hAxis: {
                        title: 'Concurrency',
                        gridlines: {
                            count: 11
                        }
                    }
                },
                optionsRps = $.extend({}, optionsCommon, {
                    title: 'Concurrency vs. requests per second',
                    subtitle: 'Fig. 1.1',
                    vAxis: {
                        title: 'Requests per second',
                        gridlines: {
                            count: 7
                        }
                    },
                    trendlines: {
                        0: {
                            type: 'polynomial',
                            degree: 7,
                            visibleInLegend: true,
                            pointSize: 2,
                            lineWidth: 5,
                            labelInLegend: ''
                        },
                        1: {
                            type: 'polynomial',
                            degree: 7,
                            visibleInLegend: true,
                            pointSize: 2,
                            lineWidth: 5,
                            labelInLegend: ''
                        }
                    }
                }),
                optionsRps2 = $.extend(optionsRps, {subtitle: 'Fig. 1.2'}),
                optionsRt = $.extend({}, optionsCommon, {
                    title: 'Concurrency vs. request time',
                    subtitle: 'Fig. 2.1',
                    vAxis: {
                        title: 'Request time (ms)',
                        gridlines: {
                            count: 7
                        }
                    },
                    trendlines: {
                        0: {
                            type: 'linear',
                            visibleInLegend: true,
                            pointSize: 2,
                            lineWidth: 5,
                            labelInLegend: ''
                        },
                        1: {
                            type: 'linear',
                            visibleInLegend: true,
                            pointSize: 2,
                            lineWidth: 5,
                            labelInLegend: ''
                        }
                    }
                }),
                optionsRAM = $.extend({}, optionsCommon, {
                    title: 'Concurrency vs. Max used RAM',
                    subtitle: 'Fig. 3.1',
                    vAxis: {
                        title: 'Max used RAM (Mb)',
                        gridlines: {
                            count: 7
                        }
                    },
                    trendlines: {
                        0: {
                            type: 'polynomial',
                            degree: 7,
                            visibleInLegend: true,
                            pointSize: 2,
                            lineWidth: 5,
                            labelInLegend: ''
                        },
                        1: {
                            type: 'polynomial',
                            degree: 7,
                            visibleInLegend: true,
                            pointSize: 2,
                            lineWidth: 5,
                            labelInLegend: ''
                        }
                    }
                }),
                chartRps = new google.visualization.ScatterChart(
                    $('#concurrency_vs_requests_per_second').get(0)
                ),
                chartRps2 = new google.visualization.ScatterChart(
                    $('#concurrency_vs_requests_per_second-2').get(0)
                ),
                chartRt = new google.visualization.ScatterChart(
                    $('#concurrency_vs_request_time').get(0)
                ),
                chartRAM = new google.visualization.ScatterChart(
                    $('#concurrency_vs_ram').get(0)
                );

            chartRps.draw(dataRps, optionsRps);
            chartRps2.draw(dataRps2, optionsRps2);
            chartRt.draw(dataRt, optionsRt);
            chartRAM.draw(dataRAM, optionsRAM);
        }
    </script>
</head>
<body>
    <h1>mod_perl vs. PSGI benchmark</h1>
    <h2>1. Requests per second</h2>
    <p>
        Dependence of handled request per second and concurrency both mod_perl and PSGI shown in Fig. 1.1.
        With the growth of concurrency in both modes saturation reached quickly, however, PSGI mode allowed to handle
        approximately 20% more requests.
    </p>
    <div id="concurrency_vs_requests_per_second"></div>
    <div id="concurrency_vs_requests_per_second-2"></div>

    <h2>2. Request time</h2>
    <div id="concurrency_vs_request_time"></div>

    <h2>3. RAM usage</h2>
    <div id="concurrency_vs_ram"></div>
</body>
</html>
