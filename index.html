<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="icon" type="image/png" href="favicon.png" />
    <title>mod_perl vs. PSGI benchmark</title>
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.1.0.min.js"
            integrity="sha256-cCueBR6CsyA4/9szpPfrX3s49M9vUU5BgtiJj06wt/s=" crossorigin="anonymous"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
        google.charts.load('current', {'packages':['corechart']});
        google.charts.setOnLoadCallback(drawChart);

        function drawChart() {
            var titles = ['Concurrency', 'Apache / mod_perl', 'Nginx / uWSGI / PSGI'],
                dataRps = google.visualization.arrayToDataTable([
                    titles,
                    [1, 254.32, 488.83], [1, 254.23, 495.11], [1, 277.72, 494.28],
                    [2, 1079.18, 1143.23], [2, 1092.45, 1143.64], [2, 1042.49, 1141.20],
                    [3, 1447.85, 1365.07], [3, 1431.19, 1343.03], [3, 1398.57, 1341.16],
                    [4, 1467.45, 1539.03], [4, 1414.33, 1529.81], [4, 1381.85, 1581.04],
                    [5, 1422.61, 1629.01], [5, 1432.95, 1678.92], [5, 1404.10, 1690.35],
                    [6, 1449.32, 1712.10], [6, 1391.20, 1706.96], [6, 1390.84, 1673.77],
                    [7, 1435.41, 1685.79], [7, 1465.07, 1694.03], [7, 1412.71, 1749.53],
                    [8, 1369.35, 1762.94], [8, 1391.83, 1733.51], [8, 1439.33, 1767.74],
                    [9, 1395.05, 1619.10], [9, 1481.12, 1746.47], [9, 1389.88, 1735.60],
                    [10, 1420.79, 1763.83], [10, 1445.97, 1698.64], [10, 1381.05, 1645.92],
                    [11, 1416.23, 1743.44], [11, 1451.56, 1783.92], [11, 1407.44, 1627.79],
                    [12, 1447.71, 1729.28], [12, 1389.61, 1747.87], [12, 1396.73, 1700.47],
                    [13, 1475.34, 1723.03], [13, 1457.50, 1724.04], [13, 1418.74, 1689.13],
                    [14, 1430.46, 1783.38], [14, 1470.93, 1714.80], [14, 1421.51, 1755.95],
                    [15, 1430.74, 1796.77], [15, 1405.18, 1767.92], [15, 1437.02, 1763.80],
                    [16, 1475.27, 1773.54], [16, 1477.14, 1809.69], [16, 1470.97, 1725.52],
                    [17, 1446.70, 1769.11], [17, 1412.60, 1776.07], [17, 1397.91, 1822.07],
                    [18, 1481.63, 1805.45], [18, 1470.68, 1723.41], [18, 1403.06, 1829.08],
                    [19, 1410.79, 1756.13], [19, 1428.42, 1747.63], [19, 1415.09, 1770.65],
                    [20, 1481.09, 1839.08], [20, 1467.99, 1787.25], [20, 1404.11, 1809.90]
                ]),
                dataRt = google.visualization.arrayToDataTable([
                    titles,
                    [1, 3.932, 2.046],    [1, 3.933, 2.020],    [1, 3.601, 2.023],
                    [2, 1.853, 1.749],    [2, 1.831, 1.749],    [2, 1.918, 1.753],
                    [3, 2.072, 2.198],    [3, 2.096, 2.234],    [3, 2.145, 2.237],
                    [4, 2.726, 2.599],    [4, 2.828, 2.615],    [4, 2.895, 2.530],
                    [5, 3.515, 3.069],    [5, 3.489, 2.978],    [5, 3.561, 2.958],
                    [6, 4.140, 3.504],    [6, 4.313, 3.515],    [6, 4.314, 3.585],
                    [7, 4.877, 4.152],    [7, 4.778, 4.132],    [7, 4.955, 4.001],
                    [8, 5.842, 4.538],    [8, 5.748, 4.615],    [8, 5.558, 4.526],
                    [9, 6.451, 5.559],    [9, 6.076, 5.153],    [9, 6.475, 5.186],
                    [10, 7.038, 5.669],   [10, 6.916, 5.887],   [10, 7.241, 6.076],
                    [11, 7.767, 6.309],   [11, 7.578, 6.166],   [11, 7.816, 6.758],
                    [12, 8.289, 6.939],   [12, 8.636, 6.866],   [12, 8.591, 7.057],
                    [13, 8.812, 7.545],   [13, 8.919, 7.540],   [13, 9.163, 7.696],
                    [14, 9.787, 7.850],   [14, 9.518, 8.164],   [14, 9.849, 7.973],
                    [15, 10.484, 8.348],  [15, 10.675, 8.485],  [15, 10.438, 8.504],
                    [16, 10.845, 9.022],  [16, 10.832, 8.841],  [16, 10.877, 9.273],
                    [17, 11.751, 9.609],  [17, 12.035, 9.572],  [17, 12.161, 9.330],
                    [18, 12.149, 9.970],  [18, 12.239, 10.444], [18, 12.829, 9.841],
                    [19, 13.468, 10.819], [19, 13.301, 10.872], [19, 13.427, 10.731],
                    [20, 13.504, 10.875], [20, 13.624, 11.190], [20, 14.244, 11.050]
                ]),
                optionsCommon = {
                    width: 900,
                    height: 500,
                    legend: {position: 'bottom'},
                    crosshair: 'none',
                    hAxis: {
                        title: 'Concurrency',
                        gridlines: {
                            count: 11
                        }
                    }
                },
                optionsRps = $.extend({}, optionsCommon, {
                    title: 'Concurrency vs. requests per second',
                    subtitle: 'Fig. 1.1',
                    vAxis: {
                        title: 'Requests per second',
                        gridlines: {
                            count: 7
                        }
                    },
                    trendlines: {
                        0: {
                            type: 'polynomial',
                            degree: 7,
                            visibleInLegend: true,
                            pointSize: 2,
                            lineWidth: 5,
                            labelInLegend: ''
                        },
                        1: {
                            type: 'polynomial',
                            degree: 7,
                            visibleInLegend: true,
                            pointSize: 2,
                            lineWidth: 5,
                            labelInLegend: ''
                        }
                    }
                }),
                optionsRt = $.extend({}, optionsCommon, {
                    title: 'Concurrency vs. request time',
                    subtitle: 'Fig. 1.2',
                    vAxis: {
                        title: 'Request time (ms)',
                        gridlines: {
                            count: 7
                        }
                    },
                    trendlines: {
                        0: {
                            type: 'linear',
//                            degree: 7,
                            visibleInLegend: true,
                            pointSize: 2,
                            lineWidth: 5,
                            labelInLegend: ''
                        },
                        1: {
                            type: 'linear',
//                            degree: 7,
                            visibleInLegend: true,
                            pointSize: 2,
                            lineWidth: 5,
                            labelInLegend: ''
                        }
                    }
                }),
                chartRps = new google.visualization.ScatterChart(
                    $('#concurrency_vs_requests_per_second').get(0)
                ),
                chartRt = new google.visualization.ScatterChart(
                    $('#concurrency_vs_request_time').get(0)
                );

            chartRps.draw(dataRps, optionsRps);
            chartRt.draw(dataRt, optionsRt);
        }
    </script>
</head>
<body>
    <h1>mod_perl vs. PSGI benchmark</h1>
    <h2>1. Requests per second</h2>
    <p>
        Dependence of handled request per second and concurrency both mod_perl and PSGI shown in Fig. 1.1.
        With the growth of concurrency in both modes saturation reached quickly, however, PSGI mode allowed to handle
        approximately 20% more requests.
    </p>
    <div id="concurrency_vs_requests_per_second"></div>

    <h2>2. Request time</h2>
    <div id="concurrency_vs_request_time"></div>
</body>
</html>
