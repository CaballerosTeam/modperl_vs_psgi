<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="icon" type="image/png" href="favicon.png" />
    <title>mod_perl vs. PSGI benchmark</title>
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.1.0.min.js"
            integrity="sha256-cCueBR6CsyA4/9szpPfrX3s49M9vUU5BgtiJj06wt/s=" crossorigin="anonymous"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
        google.charts.load('current', {'packages':['corechart']});
        google.charts.setOnLoadCallback(drawChart);

        function drawChart() {
            var titles = ['Concurrency', 'Apache / mod_perl', 'Nginx / uWSGI / PSGI'],
                dataRps = google.visualization.arrayToDataTable([
                        titles,
                        [1,  313.79,  500.66],  [1,  307.88, 500.21],   [1,  304.11,  497.20],
                        [2,  1063.43, 1062.85], [2,  1058.22, 1090.27], [2,  1049.42, 1091.04],
                        [3,  1399.87, 1248.63], [3,  1299.82, 1310.69], [3,  1359.53, 1295.45],
                        [4,  1420.76, 1393.32], [4,  1423.17, 1464.17], [4,  1381.47, 1430.92],
                        [5,  1408.14, 1505.91], [5,  1357.64, 1513.04], [5,  1366.72, 1554.33],
                        [6,  1417.92, 1563.46], [6,  1371.45, 1544.30], [6,  1336.41, 1580.03],
                        [7,  1421.95, 1542.04], [7,  1428.33, 1523.61], [7,  1407.13, 1581.04],
                        [8,  1460.82, 1558.31], [8,  1423.42, 1647.77], [8,  1413.11, 1663.85],
                        [9,  1451.82, 1635.59], [9,  1384.20, 1620.71], [9,  1427.43, 1659.79],
                        [10, 1373.19, 1603.94], [10, 1427.99, 1658.58], [10, 1429.27, 1646.12],
                        [11, 1439.16, 1629.57], [11, 1403.16, 1610.48], [11, 1419.89, 1642.82],
                        [12, 1459.80, 1592.65], [12, 1382.22, 1635.89], [12, 1430.98, 1608.51],
                        [13, 1382.16, 1645.79], [13, 1361.34, 1649.28], [13, 1422.95, 1630.58],
                        [14, 1446.20, 1643.68], [14, 1381.60, 1668.17], [14, 1398.19, 1693.07],
                        [15, 1459.37, 1636.82], [15, 1384.43, 1666.61], [15, 1418.19, 1685.11],
                        [16, 1422.06, 1646.21], [16, 1427.98, 1687.32], [16, 1422.45, 1706.75],
                        [17, 1409.32, 1620.29], [17, 1458.64, 1701.27], [17, 1402.00, 1720.37],
                        [18, 1432.16, 1637.06], [18, 1427.98, 1730.10], [18, 1416.69, 1683.53],
                        [19, 1411.71, 1717.40], [19, 1403.71, 1647.71], [19, 1415.54, 1723.98],
                        [20, 1466.90, 1696.59], [20, 1448.19, 1741.00], [20, 1420.48, 1718.98]
                ]),
                dataRt = google.visualization.arrayToDataTable([
                    titles,
                    [1,  3.187,  1.997],  [1,  3.248,  1.999],  [1,  3.288,  2.011],
                    [2,  1.881,  1.882],  [2,  1.890,  1.834],  [2,  1.906,  1.833],
                    [3,  2.143,  2.403],  [3,  2.308,  2.289],  [3,  2.207,  2.316],
                    [4,  2.815,  2.871],  [4,  2.811,  2.732],  [4,  2.895,  2.795],
                    [5,  3.551,  3.320],  [5,  3.683,  3.305],  [5,  3.658,  3.217],
                    [6,  4.232,  3.838],  [6,  4.375,  3.885],  [6,  4.490,  3.797],
                    [7,  4.923,  4.539],  [7,  4.901,  4.594],  [7,  4.975,  4.427],
                    [8,  5.476,  5.134],  [8,  5.620,  4.855],  [8,  5.661,  4.808],
                    [9,  6.199,  5.503],  [9,  6.502,  5.553],  [9,  6.305,  5.422],
                    [10, 7.282,  6.235],  [10, 7.003,  6.029],  [10, 6.997,  6.075],
                    [11, 7.643,  6.750],  [11, 7.839,  6.830],  [11, 7.747,  6.696],
                    [12, 8.220,  7.535],  [12, 8.682,  7.335],  [12, 8.386,  7.460],
                    [13, 9.406,  7.899],  [13, 9.549,  7.882],  [13, 9.136,  7.973],
                    [14, 9.681,  8.517],  [14, 10.133, 8.392],  [14, 10.013, 8.269],
                    [15, 10.278, 9.164],  [15, 10.835, 9.000],  [15, 10.577, 8.901],
                    [16, 11.251, 9.719],  [16, 11.205, 9.483],  [16, 11.248, 9.375],
                    [17, 12.063, 10.492], [17, 11.655, 9.993],  [17, 12.126, 9.882],
                    [18, 12.568, 10.995], [18, 12.605, 10.404], [18, 12.706, 10.692],
                    [19, 13.459, 11.063], [19, 13.536, 11.531], [19, 13.422, 11.021],
                    [20, 13.634, 11.788], [20, 13.810, 11.488], [20, 14.080, 11.635]
                ]),
                dataRAM = google.visualization.arrayToDataTable([
                    titles,
                    [1,  33.0508, 14.1445], [1,  27.5664, 14.1445], [1,  30.1602, 14.1445],
                    [2,  53.3789, 14.1445], [2,  39.8789, 14.1445], [2,  50.4961, 14.1445],
                    [3,  97.1211, 14.1445], [3,  78.0586, 14.1445], [3,  103.559, 14.1445],
                    [4,  168.598, 14.1445], [4,  174.184, 14.1445], [4,  189.945, 14.1445],
                    [5,  203.324, 14.1445], [5,  190.094, 14.1445], [5,  193.898, 14.1445],
                    [6,  217.676, 14.1445], [6,  195.086, 14.1445], [6,  195.277, 14.1445],
                    [7,  226.527, 14.1445], [7,  203.840, 14.1445], [7,  207.949, 14.1445],
                    [8,  237.098, 14.1445], [8,  209.852, 14.1445], [8,  221.246, 14.1445],
                    [9,  250.504, 14.1445], [9,  218.617, 14.1445], [9,  229.676, 14.1445],
                    [10, 248.098, 14.1445], [10, 222.660, 14.1445], [10, 237.582, 14.1445],
                    [11, 247.355, 14.1484], [11, 228.848, 14.1484], [11, 240.734, 14.1445],
                    [12, 262.051, 14.1602], [12, 232.199, 14.1641], [12, 247.023, 14.1602],
                    [13, 264.887, 14.1758], [13, 230.922, 14.1758], [13, 252.395, 14.1758],
                    [14, 266.691, 14.1875], [14, 233.840, 14.1914], [14, 263.738, 14.1875],
                    [15, 274.684, 14.1992], [15, 240.719, 14.2031], [15, 273.875, 14.1992],
                    [16, 277.777, 14.2148], [16, 252.660, 14.2188], [16, 275.078, 14.2109],
                    [17, 289.379, 14.2227], [17, 259.879, 14.2227], [17, 288.324, 14.2266],
                    [18, 303.301, 14.2422], [18, 270.965, 14.2305], [18, 298.891, 14.2383],
                    [19, 313.871, 14.2539], [19, 283.082, 14.2539], [19, 303.531, 14.2461],
                    [20, 323.066, 14.2695], [20, 295.973, 14.2422], [20, 314.715, 14.2617]
                ]),
                optionsCommon = {
                    width: 900,
                    height: 500,
                    legend: {position: 'bottom'},
                    crosshair: 'none',
                    hAxis: {
                        title: 'Concurrency',
                        gridlines: {
                            count: 11
                        }
                    }
                },
                optionsRps = $.extend({}, optionsCommon, {
                    title: 'Concurrency vs. requests per second',
                    subtitle: 'Fig. 1.1',
                    vAxis: {
                        title: 'Requests per second',
                        gridlines: {
                            count: 7
                        }
                    },
                    trendlines: {
                        0: {
                            type: 'polynomial',
                            degree: 7,
                            visibleInLegend: true,
                            pointSize: 2,
                            lineWidth: 5,
                            labelInLegend: ''
                        },
                        1: {
                            type: 'polynomial',
                            degree: 7,
                            visibleInLegend: true,
                            pointSize: 2,
                            lineWidth: 5,
                            labelInLegend: ''
                        }
                    }
                }),
                optionsRt = $.extend({}, optionsCommon, {
                    title: 'Concurrency vs. request time',
                    subtitle: 'Fig. 1.2',
                    vAxis: {
                        title: 'Request time (ms)',
                        gridlines: {
                            count: 7
                        }
                    },
                    trendlines: {
                        0: {
                            type: 'linear',
                            visibleInLegend: true,
                            pointSize: 2,
                            lineWidth: 5,
                            labelInLegend: ''
                        },
                        1: {
                            type: 'linear',
                            visibleInLegend: true,
                            pointSize: 2,
                            lineWidth: 5,
                            labelInLegend: ''
                        }
                    }
                }),
                optionsRAM = $.extend({}, optionsCommon, {
                    title: 'Concurrency vs. Max used RAM',
                    subtitle: 'Fig. 1.3',
                    vAxis: {
                        title: 'Max used RAM (Mb)',
                        gridlines: {
                            count: 7
                        }
                    },
                    trendlines: {
                        0: {
                            type: 'polynomial',
                            degree: 7,
                            visibleInLegend: true,
                            pointSize: 2,
                            lineWidth: 5,
                            labelInLegend: ''
                        },
                        1: {
                            type: 'polynomial',
                            degree: 7,
                            visibleInLegend: true,
                            pointSize: 2,
                            lineWidth: 5,
                            labelInLegend: ''
                        }
                    }
                }),
                chartRps = new google.visualization.ScatterChart(
                    $('#concurrency_vs_requests_per_second').get(0)
                ),
                chartRt = new google.visualization.ScatterChart(
                    $('#concurrency_vs_request_time').get(0)
                ),
                chartRAM = new google.visualization.ScatterChart(
                    $('#concurrency_vs_ram').get(0)
                );

            chartRps.draw(dataRps, optionsRps);
            chartRt.draw(dataRt, optionsRt);
            chartRAM.draw(dataRAM, optionsRAM);
        }
    </script>
</head>
<body>
    <h1>mod_perl vs. PSGI benchmark</h1>
    <h2>1. Requests per second</h2>
    <p>
        Dependence of handled request per second and concurrency both mod_perl and PSGI shown in Fig. 1.1.
        With the growth of concurrency in both modes saturation reached quickly, however, PSGI mode allowed to handle
        approximately 20% more requests.
    </p>
    <div id="concurrency_vs_requests_per_second"></div>

    <h2>2. Request time</h2>
    <div id="concurrency_vs_request_time"></div>

    <h2>3. RAM usage</h2>
    <div id="concurrency_vs_ram"></div>
</body>
</html>
